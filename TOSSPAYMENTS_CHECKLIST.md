# 🎉 토스페이먼츠 승인 후 체크리스트

토스페이먼츠 사업자등록 승인이 완료되면, 아래 3가지만 변경하면 **즉시 서비스 시작**할 수 있습니다!

---

## ✅ 변경해야 할 것 (딱 3가지!)

### 1️⃣ 서버: 시크릿 키 변경

**파일:** `Server/.env` (또는 배포 플랫폼 환경변수)

```bash
# 변경 전 (테스트 키)
TOSS_SECRET_KEY=test_sk_zXLkKEypNArWmo50nX3lmeaxYG5R

# 변경 후 (라이브 키)
TOSS_SECRET_KEY=live_sk_여기에_실제_시크릿_키_입력
```

### 2️⃣ 웹사이트: 클라이언트 키 변경

**파일:** `Website/index.html` (약 1369번째 줄)

```javascript
// 변경 전 (테스트 키)
const TOSS_CLIENT_KEY = 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq';

// 변경 후 (라이브 키)
const TOSS_CLIENT_KEY = 'live_ck_여기에_실제_클라이언트_키_입력';
```

### 3️⃣ 웹사이트: API 서버 URL 확인

**파일:** `Website/index.html` (약 1352번째 줄)

```javascript
// 프로덕션 URL이 실제 서버 주소인지 확인
const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
    ? 'http://localhost:3001'
    : 'https://api.badasugi.com';  // ← 실제 서버 URL로 변경
```

---

## 📍 키 발급 위치

토스페이먼츠 개발자센터: https://developers.tosspayments.com

1. 로그인
2. **내 개발정보** > **인증키 관리**
3. **라이브 키** 탭 선택
4. **시크릿 키** (서버용) 복사
5. **클라이언트 키** (웹사이트용) 복사

---

## 🧪 테스트 순서

### 변경 전 테스트 (테스트 모드)
1. 웹사이트에서 구매 클릭
2. 이메일 입력
3. 테스트 카드로 결제:
   - 카드번호: `4330-0000-0000-0000`
   - 유효기간: 아무 미래 날짜
   - CVC: 아무 3자리
4. 이메일로 라이선스 키 수신 확인
5. Mac 앱에서 라이선스 키 입력 및 활성화 확인

### 변경 후 테스트 (라이브 모드)
1. 실제 카드로 소액(1,000원) 결제 테스트
2. 이메일 수신 확인
3. 라이선스 활성화 확인
4. **결제 취소 처리** (토스페이먼츠 관리자에서)

---

## ⚠️ 주의사항

1. **테스트 키와 라이브 키를 혼용하지 마세요**
   - 서버: `live_sk_...`
   - 웹사이트: `live_ck_...`

2. **시크릿 키는 절대 노출하지 마세요**
   - GitHub에 커밋 금지
   - 클라이언트(웹사이트)에 포함 금지

3. **배포 순서**
   1. 서버 먼저 배포 (환경변수 변경)
   2. 웹사이트 배포
   3. 테스트

---

## 📞 문제 발생 시

### 결제는 되는데 이메일이 안 오는 경우
- SendGrid API 키 확인
- 발신자 이메일 인증 여부 확인
- SendGrid 대시보드에서 이메일 로그 확인

### 결제 오류 발생 시
- 토스페이먼츠 개발자센터 > 테스트 결제 로그 확인
- 서버 콘솔 로그 확인

### 라이선스 활성화 안 되는 경우
- 서버 `/api/health` 엔드포인트 확인
- Mac 앱 콘솔에서 네트워크 요청 확인

---

## ✨ 완료!

위 3가지 변경 후:
- **웹사이트에서 결제** → **이메일로 라이선스 키 자동 발송** → **Mac 앱에서 활성화**

모든 플로우가 자동으로 작동합니다! 🎉

